<wxs src="../../common.wxs" module="morejs" />
<!-- 搜索栏 -->
<van-search-bar 
      value = "{{value}}"
      input-align = "center"
      placeholder = "搜索 书名 作者 对应课程"
      use-action-slot
      bind:change = "keyInput"
      bind:search = "search"
>
     <view slot = "action" bind:tap = "search">搜索</view>
</van-search-bar>

<!-- 筛选和排序框 -->
<block wx:if="{{list.length!=0}}">
      <van-dropdown-menu>
  <van-dropdown-item value="{{ value1 }}" options="{{ option1 }}" />
  <van-dropdown-item id="item" title="{{ itemTitle }}">
    <van-cell title="{{ switchTitle1 }}">
      <van-switch
        slot="right-icon"
        size="24px"
        style="height: 26px"
        checked="{{ switch1 }}"
        active-color="#ee0a24"
        bind:change="onSwitch1Change"
      />
    </van-cell>
    <van-cell title="{{ switchTitle2 }}">
      <van-switch
        slot="right-icon"
        size="24px"
        style="height: 26px"
        checked="{{ switch2 }}"
        active-color="#ee0a24"
        bind:change="onSwitch2Change"
      />
    </van-cell>
    <view style="padding: 5px 16px;">
      <van-button type="danger" block round bind:click="onConfirm">
        确认
      </van-button>
    </view>
  </van-dropdown-item>
      </van-dropdown-menu>

</block>

<!-- 搜索历史和相关推荐 -->
<view class="contain">
      <block wx:if="{{list.length==0}}">
            <block wx:if="{{!blank}}">
                  <view class="a">
                        <image src="/images/history.png"></image>
                        <view>搜索历史</view>
                  </view>
                  <block wx:if="{{hislist.length==0}}">
                        <view class="nosearch">您啥也没搜过，还不快试试</view>
                  </block>
                  <block wx:if="{{hislist.length>0}}">
                        <block wx:for="{{hislist}}" wx:key="*this">
                              <view bindtap="choosekey" data-key="{{item}}" class="hisitem">{{index+1}}. {{item}}</view>
                        </block>
                  </block>
            </block>
            <block wx:if="{{blank}}">
                  <view class="a">
                        <image src="/images/result.png"></image>
                        <view>搜索结果</view>
                  </view>
                  <!--无内容显示-->
                  <view class="nocontent">
                        <image src="/images/blank.png"></image>
                        <view class="blank_text">暂无{{key}}相关书籍哟~</view>
                  </view>
            </block>
            <view class="a">
                  <image src="/images/recommend.png"></image>
                  <view>更多推荐</view>
            </view>
            <block wx:if="{{newlist.length==0}}">
                  <view class="nosearch">暂无相关推荐</view>
            </block>
            <block wx:if="{{newlist.length>0}}">
                  <block wx:for="{{newlist}}" wx:key="_id">
                        <view class="list_box" bindtap="detail" data-id="{{item._id}}">
                              <image class="list_poster" src="{{item.bookinfo.pic}}"></image>
                              <view class="list_content">
                                    <view class="list_word">
                                          <view class="list_title text-cut">{{item.bookinfo.title}}
                                          </view>
                                          <view class="list_author text-cut">{{item.bookinfo.author}}
                                          </view>
                                    </view>
                                    <view class="list_between">
                                          <view class="list_price">￥{{item.price}}.00元</view>
                                          <view class="list_time">{{morejs.timelog(item.creat )}}发布
                                          </view>
                                    </view>
                              </view>
                        </view>
                  </block>
            </block>
      </block>
      <block wx:if="{{list.length>0}}">
            <view class="a">
                  <image src="/images/result.png"></image>
                  <view>搜索结果</view>
            </view>
            <block wx:for="{{list}}" wx:key="_id">
                  <view class="list_box" bindtap="detail" data-id="{{item._id}}">
                        <image class="list_poster" src="{{item.bookinfo.pic}}"></image>
                        <view class="list_content">
                              <view class="list_word">
                                    <view class="list_title text-cut">{{item.bookinfo.title}}
                                    </view>
                                    <view class="list_author text-cut">{{item.bookinfo.author}}
                                    </view>
                              </view>
                              <view class="list_between">
                                    <view class="list_price">￥{{item.price}}.00元</view>
                                    <view class="list_time">{{morejs.timelog(item.creat )}}发布
                                    </view>
                              </view>
                        </view>
                  </view>
            </block>
      </block>
</view>



<block wx:if="{{list.length>10}}">
      <import src="/common.wxml" />
      <template is="loadmore" data="{{nomore}}" />
</block>
<van-transition show="{{ scrollTop>500 }}" custom-class="block" duration="600">
      <view class="totop" bindtap="gotop">
            <image src="/images/top.png"></image>
      </view>
</van-transition>