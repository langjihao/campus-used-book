<wxs src="../../common.wxs" module="morejs" />
<!-- 搜索栏 -->
<van-search-bar 
      value = "{{value}}"
      input-align = "center"
      placeholder = "搜索 书名 作者 对应课程"
      use-action-slot
      bind:change = "keyInput"
      bind:search = "search"
>
     <view slot = "action" bind:tap = "search">搜索</view>
</van-search-bar>

<!-- 筛选和排序框 -->
<!-- <block wx:if="{{list.length!=0}}">
      <van-dropdown-menu>
  <van-dropdown-item value="{{ value1 }}" options="{{ option1 }}" />
  <van-dropdown-item id="item" title="{{ itemTitle }}">
    <van-cell title="{{ switchTitle1 }}">
      <van-switch
        slot="right-icon"
        size="24px"
        style="height: 26px"
        checked="{{ switch1 }}"
        active-color="#ee0a24"
        bind:change="onSwitch1Change"
      />
    </van-cell>
    <van-cell title="{{ switchTitle2 }}">
      <van-switch
        slot="right-icon"
        size="24px"
        style="height: 26px"
        checked="{{ switch2 }}"
        active-color="#ee0a24"
        bind:change="onSwitch2Change"
      />
    </van-cell>
    <view style="padding: 5px 16px;">
      <van-button type="danger" block round bind:click="onConfirm">
        确认
      </van-button>
    </view>
  </van-dropdown-item>
      </van-dropdown-menu>

</block> -->

<!-- 搜索历史 -->
<block wx:if="{{list.length==0}}">
  <view class="a">
        <image src="/images/history.png"></image>
        <view>搜索历史</view>
        <image src="/images/del.png" bindtap="deleteall"></image>
  </view>
  <block wx:if="{{hislist.length==0}}">
        <view class="nosearch">您啥也没搜过，还不快试试</view>
  </block>
  <block wx:if="{{hislist.length>0}}">
    <van-tag wx:for="{{hislist}}"size="large" data-key="{{item}}" color ="#f8f8f8" text-color="#58727e" bindtap="onTagTap"bind:close="deletehis">{{item}}</van-tag>
  </block>
</block>

<!-- 搜索结果 -->
<block wx:if="{{blank}}">
  <view class="a">
            <image src="/images/result.png"></image>
            <view>搜索结果</view>
  </view>
  <!-- 结果为空 -->
  <block wx:if="{{list.length==0}}">
        <!--无内容显示-->
        <view class="nocontent">
              <image src="/images/blank.png"></image>
              <view class="blank_text">暂无{{key}}相关书籍哟~</view>
        </view>
        <!-- 相关推荐,暂未完成 -->
  </block>
  <!-- 结果不为空 -->
  <block wx:if="{{list.length>0}}">
      <block wx:for="{{list}}" wx:key="_id">
        <van-card price = "{{item.price}}" bind:tap="detail" data-id="{{item._id}}"thumb="{{item.piclist[0]}}" thumb-mode="aspectFill" title="{{item.title}}" tag="{{item.sort}}">
        <view slot="tags">
          <van-tag plain type="success" wx:for="{{item.tag}}" size="small">{{item}}</van-tag> 
        </view>
        </van-card> 
      </block>
  </block>
</block>



<block wx:if="{{list.length>10}}">
      <import src="/common.wxml" />
      <template is="loadmore" data="{{nomore}}" />
</block>
<van-transition show="{{ scrollTop>500 }}" custom-class="block" duration="600">
      <view class="totop" bindtap="gotop">
            <image src="/images/top.png"></image>
      </view>
</van-transition>