<wxs src="../../common.wxs" module="morejs" />
<!-- banner配置 -->
<swiper class="banner" indicator-dots  indicator-active-color="#02C39A" circular>
      <block wx:for="{{banner}}" wx:key="id">
            <swiper-item>
                  <image lazy-load src="{{item.img}}" bindtap="goweb" data-web="{{item}}" class="banner_image" />
            </swiper-item>
      </block>
</swiper>
<!-- 搜索栏 -->
<van-search-bar 
      value = "{{value}}"
      input-align = "center"
      placeholder = "搜索 书名 作者 对应课程"
      use-action-slot
      bind:change = "onChange"
      bind:search = "onSearch"
>
     <view slot = "action" bind:tap = "onClick">搜索</view>
</van-search-bar>

<!--分类导航-->
<van-tabs sticky swipeable color = "#02C39A" active="{{active}}" bind:click = "gettab">
      <van-tab wx:for="{{sort_1}}" wx:key="id" title = "{{item.name}}"></van-tab>
</van-tabs>
<view></view>


<!--宫格显示-->
<view hidden="{{!iscard}}">
      <view class="card_grid" wx:if="{{list.length>0}}">
            <block wx:for="{{list}}" wx:key="_id">
                  <view class="card_one" bindtap="detail" data-id="{{item._id}}">
                        <image lazy-load class="card_poster" src="{{item.bookinfo.pic}}"></image>
                        <view class="card_title text-cut">{{item.bookinfo.title}}
                        </view>
                        <view class="card_author text-cut">{{item.bookinfo.author}}
                        </view>
                        <view class="card_between">
                              <view class="card_price">￥{{item.price}}.00元</view>
                              <image lazy-load class="card_buy" src="/images/buy.png"></image>
                        </view>
                  </view>
            </block>
      </view>
</view>
<!--列表显示-->
<block wx:if="{{list.length>0}}">
      <block wx:for="{{list}}" wx:key="_id">
            <van-card price = "{{item.price}}" bind:tap="detail" data-id="{{item._id}}" thumb= "{{item.bookinfo.pic}}" title="{{item.bookinfo.title}}" desc="{{item.bookinfo.author}}"></van-card>
      </block>
</block>
<!--无内容显示-->
<view class="nocontent" wx:if="{{list.length==0}}">
      <image lazy-load src="/images/blank.png"></image>
      <view class="blank_text">这里空空如也~</view>
</view>
<!-- 未登录提示 -->
<navigator url='/pages/wxlogin/wxlogin' class="nologin" wx:if="{{!islogin}}" >未登录</navigator>

<block wx:if="{{list.length>10}}">
      <import src="/common.wxml" />
      <template is="loadmore" data="{{nomore}}" />
</block>

<van-transition show="{{ scrollTop>500 }}" custom-class="block" duration="600">
      <view class="totop" bindtap="gotop">
            <image  lazy-load src="/images/top.png"></image>
      </view>
</van-transition>
